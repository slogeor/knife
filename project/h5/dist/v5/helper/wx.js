var isWxReady=!1,readyFunc=[],wxApiList=["onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareQZone","closeWindow"];function fetchWXParam(n){$.ajax({type:"GET",url:"http://39.97.167.25:80/weChat/getConfig",cache:!1,data:{url:window.location.href.split("#")[0]},success:function(e){e.ret&&e.data&&(console.log(e.data),n(e.data))},error:function(n){}})}window.wxApi={},wxApiList.forEach(function(n){window.wxApi[n]=function(e){isWxReady?wx[n](e):readyFunc.push(function(){wx[n](e)})}}),window.wxApi.config=function(n){var e=n.debug,i=void 0!==e&&e,o=n.appId,c=n.timestamp,a=n.nonceStr,t=n.signature,s=n.jsApiList,u=void 0===s?["onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareQZone","closeWindow"]:s;console.log(i),console.log(u),console.log(o),console.log(a),console.log(t),wx.config({debug:i,appId:o,timestamp:c,nonceStr:a,signature:t,jsApiList:u}),wx.ready(function(){isWxReady=!0,readyFunc.length&&readyFunc.forEach(function(n){"function"==typeof n&&n()})})},window.wxConfig={init:function(){fetchWXParam(window.wxApi.config)},wxShareConfig:function(n){var e=n.title,i=n.desc,o=n.link,c=n.imgUrl,a=n.onSuccess,t=void 0===a?NOOP:a,s=n.onCancel,u=void 0===s?NOOP:s;window.wxApi.onMenuShareTimeline({title:e,link:o,imgUrl:c,success:function(){t()},cancel:function(){u()}}),window.wxApi.onMenuShareAppMessage({title:e,desc:i,link:o,imgUrl:c,type:"",dataUrl:"",success:function(){t()},cancel:function(){u()}}),window.wxApi.onMenuShareQQ({title:e,desc:i,link:o,imgUrl:c,success:function(){t()},cancel:function(){u()}})}};
